<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Speech Samples Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h2 {
      margin-top: 40px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .card {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
    }

    audio {
      width: 100%;
      margin-top: 10px;
    }

    .transcript {
      display: none;
      white-space: pre-wrap;
      background: #f7f7f7;
      border: 1px dashed #aaa;
      margin-top: 10px;
      padding: 10px;
    }

    .show-btn {
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    .show-btn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <h1>Speech Audio Samples</h1>

  <div id="content" class="grid">
    <!-- Cards will be dynamically inserted here -->
  </div>

  <script>
    const audioDir = "sample_database/audio_files/";
    const transcriptDir = "sample_database/transcripts/";

    // List your files manually or fetch via backend (not possible with pure HTML)
    const audioFiles = [
      'Kannada_sev1_60002_118.wav',
      'Telugu_sev4_45642_3.wav',
      'Telugu_sev1_46989_105.wav',
      'Hindi_sev0_53792_151.wav',
      'Kannada_sev4_48836_202.wav',
      'Kannada_sev2_50370_42.wav',
      'Hindi_sev4_54626_131.wav',
      'Bengali_sev2_58443_85.wav',
      'Telugu_sev0_48760_140.wav',
      'Telugu_sev0_48760_169.wav',
      'Telugu_sev3_50205_24.wav',
      'Kannada_sev3_46505_126.wav',
      'Tamil_sev4_56547_179.wav',
      'Hindi_sev3_52250_135.wav',
      'Kannada_sev0_45470_136.wav',
      'Telugu_sev0_48760_180.wav',
      'Tamil_sev2_46609_89.wav',
      'Telugu_sev2_58440_35.wav',
      'Bengali_sev4_57482_189.wav',
      'Bengali_sev1_60010_103.wav',
      'Bengali_sev0_49552_35.wav',
      'Hindi_sev2_59187_155.wav',
      'Hindi_sev1_51494_147.wav',
      'Tamil_sev1_51461_80.wav',
      'Bengali_sev3_59107_114.wav',
      'Telugu_sev1_46989_114.wav',
      'Tamil_sev0_45563_205.wav'
    ];

    const contentDiv = document.getElementById("content");

    audioFiles.forEach(file => {
      const [lang, sev] = file.split('_').slice(0, 2); // "English", "sev0"
      const transcriptFile = file.replace('.wav', '.txt');

      const card = document.createElement('div');
      card.className = 'card';

      card.innerHTML = `
        <strong>Language:</strong> ${lang}<br>
        <strong>Severity:</strong> ${sev.replace("sev", "")}<br>
        <strong>File:</strong> ${file}<br>
        <audio controls src="${audioDir + file}"></audio>
        <button class="show-btn" onclick="toggleTranscript(this, '${transcriptDir + transcriptFile}')">Show Transcript</button>
        <div class="transcript" id="transcript-${file.replace('.wav', '')}">Loading...</div>
      `;

      contentDiv.appendChild(card);
    });

    function toggleTranscript(button, transcriptPath) {
      const container = button.nextElementSibling;

      if (container.style.display === 'block') {
        container.style.display = 'none';
        button.textContent = 'Show Transcript';
        return;
      }

      if (container.textContent === 'Loading...') {
        fetch(transcriptPath)
          .then(res => res.text())
          .then(data => {
            container.textContent = data;
            container.style.display = 'block';
            button.textContent = 'Hide Transcript';
          })
          .catch(err => {
            container.textContent = "Transcript not found.";
            container.style.display = 'block';
          });
      } else {
        container.style.display = 'block';
        button.textContent = 'Hide Transcript';
      }
    }
  </script>

</body>
</html>
